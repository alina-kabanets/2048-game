function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function t(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var e,n=document.querySelector(".message-start"),o=document.querySelector(".message-lose"),a=document.querySelector(".message-win"),i=document.querySelector(".game-score"),c=document.querySelector(".button"),f=0,u=!1;function s(){e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],v(),v()}function l(){for(var r=0;r<4;r++)for(var t=0;t<4;t++)if(0===e[r][t])return!0;return!1}function d(){e.forEach(function(r,t){r.forEach(function(r,e){var n=document.getElementById(t.toString()+"-"+e.toString());n.innerText="",n.classList.value="",n.classList.add("field-cell"),i.innerText=0,f=0})})}function v(){if(l()){for(var r=!1,t=.9>Math.random()?2:4;!r;){var n=Math.floor(4*Math.random()),a=Math.floor(4*Math.random());if(0===e[n][a]){e[n][a]=t;var i=document.getElementById(n.toString()+"-"+a.toString());i.innerText="".concat(t),i.classList.add("field-cell--"+t.toString()),r=!0}}(function(){if(l())return!1;for(var r=0;r<4;r++)for(var t=0;t<4;t++)if(e[r][t]===e[r][t+1])return!1;for(var n=0;n<3;n++)for(var o=0;o<4;o++)if(e[n][o]===e[n+1][o])return!1;return!0})()&&(o.classList.remove("hidden"),c.addEventListener("click",function(){o.classList.add("hidden"),d(),s()}))}}function m(r,t){var n=document.getElementById(r.toString()+"-"+t.toString()),o=e[r][t];n.innerText="",n.classList.value="",n.classList.add("field-cell"),o>0&&(n.innerText=o.toString(),n.classList.add("field-cell--"+o.toString())),2048===o&&(a.classList.remove("hidden"),u=!0)}function g(r){return r.filter(function(r){return 0!==r})}function h(r){var t=r;t=g(t);for(var e=0;e<t.length-1;e++)t[e]===t[e+1]&&(t[e]*=2,t[e+1]=0,f+=t[e],i.innerText=f);for(t=g(t);t.length<4;)t.push(0);return t}function y(r,t){for(var e=0;e<r.length;e++)for(var n=0;n<r[e].length;n++)if(r[e][n]!==t[e][n])return!0;return!1}c.addEventListener("click",function(r){n.classList.add("hidden"),c.innerText="Restart",c.classList.replace("start","restart"),s()}),c.addEventListener("click",function(r){a.classList.add("hidden"),u=!1,d(),s()}),document.addEventListener("keyup",function(r){if(r.preventDefault(),!u)switch(r.key){case"ArrowLeft":!function(){for(var r=e.map(function(r){return t(r)}),n=0;n<4;n++){var o=e[n];o=h(o),e[n]=o;for(var a=0;a<4;a++)m(n,a)}y(r,e)&&v()}();break;case"ArrowRight":!function(){for(var r=e.map(function(r){return t(r)}),n=0;n<4;n++){var o=e[n];o.reverse(),o=h(o),e[n]=o.reverse();for(var a=0;a<4;a++)m(n,a)}y(r,e)&&v()}();break;case"ArrowUp":!function(){for(var r=e.map(function(r){return t(r)}),n=0;n<4;n++){var o=[e[0][n],e[1][n],e[2][n],e[3][n]];o=h(o);for(var a=0;a<4;a++)e[a][n]=o[a],m(a,n)}y(r,e)&&v()}();break;case"ArrowDown":!function(){for(var r=e.map(function(r){return t(r)}),n=0;n<4;n++){var o=[e[0][n],e[1][n],e[2][n],e[3][n]];o.reverse(),(o=h(o)).reverse();for(var a=0;a<4;a++)e[a][n]=o[a],m(a,n)}y(r,e)&&v()}()}});
//# sourceMappingURL=index.1a8bb56b.js.map
